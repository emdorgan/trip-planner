const delBtn=async a=>{if(a.target.hasAttribute("data-id")&&"delete"===a.target.getAttribute("id")){const b=a.target.getAttribute("data-id"),c=a.target.getAttribute("data-trip"),d=await fetch(`/api/locations/${b}`,{method:"DELETE"});d.ok?document.location.replace(`/trip/${c}`):alert("Failed to delete location")}},addNewLocation=async a=>{a.preventDefault();var b={year:"numeric",month:"short",day:"numeric"};const c=document.querySelector("#location-name").value.trim(),d=document.querySelector("#location-address").value.trim(),e=document.querySelector("#vehicle").value.trim(),f=document.querySelector("#transit-details").value.trim(),g=document.querySelector("#start-date").value.trim(),h=new Date(g),i=h.toLocaleDateString("en-US",b).toString(),j=document.querySelector("#end-date").value.trim(),k=new Date(j),l=k.toLocaleDateString("en-US",b).toString(),m=document.querySelector("#contact-info").value.trim(),n=document.querySelector("#location-activities").value.trim();if(c&&d&&f&&i&&l&&n){const a=document.getElementById("submit-entry").getAttribute("data-id"),b=await fetch(`/api/locations`,{method:"POST",body:JSON.stringify({location_name:c,location_address:d,contact:m,vehicle:e,transit_details:f,start_date:i,end_date:l,location_activities:n,trip_id:a}),headers:{"Content-Type":"application/json"}});b.ok?document.location.replace(`/trip/${a}`):alert("Failed to create new location")}},revealBtnHandler=()=>{document.getElementById("new-location").setAttribute("class","new-post-form"),document.querySelector(".new-post-form").addEventListener("submit",addNewLocation)};document.querySelector("#reveal-new-location").addEventListener("click",revealBtnHandler),document.querySelector(".my-locations").addEventListener("click",delBtn);